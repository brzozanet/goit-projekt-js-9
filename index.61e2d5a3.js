const e="bf096adfc02b1d9503cca39671f19618",t="https://image.tmdb.org/t/p/w500",n="https://api.themoviedb.org/3/",o="en-US";function a(){document.querySelector("#modal__button-watched").classList.toggle("button-active"),document.querySelector("#modal__button-watched").classList.contains("button-active")?document.querySelector("#modal__button-watched").textContent="Remove from watched":document.querySelector("#modal__button-watched").textContent="Add to watched"}function c(){document.querySelector("#modal__button-queue").classList.toggle("button-active"),document.querySelector("#modal__button-queue").classList.contains("button-active")?document.querySelector("#modal__button-queue").textContent="Remove from queue":document.querySelector("#modal__button-queue").textContent="Add to queue"}window.addEventListener("load",(()=>{document.querySelector("#modal__button-watched").addEventListener("click",a),document.querySelector("#modal__button-queue").addEventListener("click",c)}));const d=`${n}/search/movie?api_key=${e}&query=`,s=fetch(`${n}/discover/movie?include_adult=false&include_video=false&language=${o}&page=1&sort_by=popularity.desc`).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.error(e))),i=document.getElementById("form"),r=document.getElementById("search"),l=document.querySelector("#movies-container-index");async function u(e){const n=await fetch(e),o=await n.json();var a;a=o.results,l.innerHTML="",a.forEach((e=>{const{original_title:n,poster_path:o,vote_average:a,release_date:c,genres:d}=e,s=document.createElement("div");s.classList.add("card"),s.innerHTML=`\n      <div id="card" class="card">\n        <img class="card__poster" src="${t}${e.poster_path}" alt="${e.original_title}" title="${e.original_title}" />\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)} |</div>\n            <div class="card__rating">Rating: ${e.vote_average}</div>\n          </div>\n        </div>\n      </div>`,l.appendChild(s)}))}u(s),i.addEventListener("submit",(e=>{e.preventDefault();const t=r.value;t&&""!==t?(u(d+t),r.value=""):window.location.reload()})),(async()=>{let a=1,c=0;const d={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${e}`}},s=document.querySelector(".show-more"),i=async t=>{try{document.querySelector(".lds-ring").style.display="inline-block";const a=await fetch(`${n}movie/popular?language=${o}&page=${t}&api_key=${e}`,d),c=await a.json();return document.querySelector(".lds-ring").style.display="none",c}catch(e){console.error(e)}};s.addEventListener("click",(async()=>{a++;const e=(await i(a)).results.map((e=>{const t=e.genre_ids,n=[];for(let e=0;e<t.length;e++)for(let o=0;o<genres.length;o++)t[e]===genres[o].id&&n.push(genres[o].name);return e.genres=n,e}));r(e),a===c&&(s.style.display="none")}));const r=e=>{e.forEach((e=>{const n=document.createElement("div");n.className="card",n.innerHTML=`\n        <div id="card" class="card" >\n          <img class="card__poster" src="${t}${e.poster_path}" alt="${e.original_title}" title="${e.original_title}" />\n        </div>\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres.join(", ")} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)}</div>\n          </div>\n        </div>`;const o=document.querySelector("#gallery");o.appendChild(n),o.classList.remove("hidden"),n.addEventListener("click",(()=>{a(e)}));const a=e=>{const n=document.querySelector(".backdrop"),a=document.querySelector(".modal__btn-close"),c=document.querySelector(".modal__photo"),d=document.querySelector(".modal__title"),s=document.querySelector(".modal__stats-vote"),i=document.querySelector(".modal__stats-votes"),r=document.querySelector(".modal__popularity"),l=document.querySelector(".modal__film-title"),u=document.querySelector(".modal__genre"),_=document.querySelector(".modal__about-text");n.classList.remove("is-hidden"),o.classList.add("hidden"),c.src=`${t}${e.poster_path}`,d.innerHTML=`${e.original_title}`,s.innerHTML=`${e.vote_average}`,i.innerHTML=`${e.vote_count}`,r.innerHTML=`${e.popularity}`,l.innerHTML=`${e.original_title}`,u.innerHTML=`${e.genres.join(", ")}`,_.innerHTML=`${e.overview}`,a.addEventListener("click",(()=>{n.classList.add("is-hidden"),o.classList.remove("hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&n.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&(n.classList.add("is-hidden"),o.classList.remove("hidden"))})),window.addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&(n.classList.add("is-hidden"),o.classList.remove("hidden"))}))}}))};await(async()=>{const t=await(async()=>{try{const t=await fetch(`${n}genre/movie/list?api_key=${e}`,d);return(await t.json()).genres}catch(e){console.error(e)}})(),o=await i(a),l=o.results.map((e=>{const n=e.genre_ids,o=[];for(let e=0;e<n.length;e++)for(let a=0;a<t.length;a++)n[e]===t[a].id&&o.push(t[a].name);return e.genres=o,e}));r(l),c=o.total_pages,s.style.display=a<c?"block":"none"})()})();
//# sourceMappingURL=index.61e2d5a3.js.map
