function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequire555a;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequire555a=o);var i=o("3479m");const a=()=>{const e=document.querySelector(".lds-ring");e&&e.classList.remove("is-hidden")},c=()=>{const e=document.querySelector(".lds-ring");e&&e.classList.add("is-hidden")};var s,l=o("40lI0"),d=(i=o("3479m"),o("b374K")),u=o("g9R5y"),f=(l=o("40lI0"),o("7IoHk")),p={};p=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var v,m={},h={};v="object"==typeof t&&t&&t.Object===Object&&t;var y="object"==typeof self&&self&&self.Object===Object&&self,_=v||y||Function("return this")();m=function(){return h.Date.now()};var g={},w={},$={},b=/\s/;$=function(e){for(var t=e.length;t--&&b.test(e.charAt(t)););return t};var E=/^\s+/;w=function(e){return e?e.slice(0,$(e)+1).replace(E,""):e};var L,T={},j={};L=(h=_).Symbol;var N={},S=Object.prototype,k=S.hasOwnProperty,O=S.toString,A=L?L.toStringTag:void 0;N=function(e){var t=k.call(e,A),r=e[A];try{e[A]=void 0;var n=!0}catch(e){}var o=O.call(e);return n&&(t?e[A]=r:delete e[A]),o};var I={},x=Object.prototype.toString;I=function(e){return x.call(e)};var q=L?L.toStringTag:void 0;j=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":q&&q in Object(e)?N(e):I(e)};var M={};M=function(e){return null!=e&&"object"==typeof e};T=function(e){return"symbol"==typeof e||M(e)&&"[object Symbol]"==j(e)};var P=/^[-+]0x[0-9a-f]+$/i,U=/^0b[01]+$/i,G=/^0o[0-7]+$/i,H=parseInt;g=function(e){if("number"==typeof e)return e;if(T(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=w(e);var r=U.test(e);return r||G.test(e)?H(e.slice(2),r?2:8):P.test(e)?NaN:+e};var K=Math.max,R=Math.min;s=function(e,t,r){var n,o,i,a,c,s,l=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var r=n,i=o;return n=o=void 0,l=t,a=e.apply(i,r)}function h(e){var r=e-s;return void 0===s||r>=t||r<0||u&&e-l>=i}function y(){var e=m();if(h(e))return _(e);c=setTimeout(y,function(e){var r=t-(e-s);return u?R(r,i-(e-l)):r}(e))}function _(e){return c=void 0,f&&n?v(e):(n=o=void 0,a)}function w(){var e=m(),r=h(e);if(n=arguments,o=this,s=e,r){if(void 0===c)return function(e){return l=e,c=setTimeout(y,t),d?v(e):a}(s);if(u)return clearTimeout(c),c=setTimeout(y,t),v(s)}return void 0===c&&(c=setTimeout(y,t)),a}return t=g(t)||0,p(r)&&(d=!!r.leading,i=(u="maxWait"in r)?K(g(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f),w.cancel=function(){void 0!==c&&clearTimeout(c),l=0,n=s=o=c=void 0},w.flush=function(){return void 0===c?a:_(m())},w};e(f).Notify.init({width:"280px",position:"center-top",timeout:4e3,closeButton:!1,distance:"25px",borderRadius:"10px",fontSize:"18px"});const Y=new(0,d.UserMovies),z=`${i.URL}/search/movie?api_key=${i.API_KEY}&query=`,B=document.querySelector("#form"),D=document.querySelector("#search"),F=document.querySelector(".movies-container");async function C(t){try{const n=await fetch(t);if(!n.ok)throw new(e(f).Notify.warning)("Sorry, the server is not responding. Please try again later.");const o=await n.json();if(0===o.results.length)throw new(e(f).Notify.failure)("MOVIE  NOT  FOUND");r=o.results,F.innerHTML="",r.forEach((e=>{const{original_title:t,poster_path:r,vote_average:n,release_date:o,genre_ids:a}=e,c=document.createElement("div");c.classList.add("card"),c.id="card";const s=a.map((e=>{const t=u.genres.find((t=>t.id===e));return t?t.name:""})).join(", "),d=r?`${i.IMG_URL}${r}`:"https://fotowarsztaty.com/wp-content/uploads/poster-placeholder.png",f=r?t:"Poster Not Found";c.innerHTML=`\n        <img class="card__poster" src="${d}" alt="${f}" title="${t}" />\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${t}</div>\n            <div class="card__genre">${s} |</div>\n            <div class="card__release">${o.slice(0,4)} </div>\n          </div>\n        </div>\n      </div>`,F.appendChild(c),c.addEventListener("click",(async()=>{(0,l.modalBoxShow)(e),await W(e.id)}));const p=document.querySelector("#modal__button-watched"),v=document.querySelector("#modal__button-queue");p.addEventListener("click",(()=>Y.addToWatch(e))),v.addEventListener("click",(()=>Y.addToQueue(e)))}))}catch(e){console.log("MOVIE  NOT  FOUND")}var r}null!==B&&B.addEventListener("input",e(s)((e=>{e.preventDefault();const t=D.value;t&&""!==t&&C(z+t)}),1e3));const W=async e=>{const t={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${i.API_KEY}`}};try{const r=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?language=${i.LANGUAGE}&api_key=${i.API_KEY}`,t);if(!r.ok)throw new Error("Network response was not ok");const n=await r.json(),{results:o}=n,a=`https://www.youtube.com/embed/${o[0].key}`;document.querySelector(".modal__trailer").innerHTML=`<iframe id="modal__trailer-video" width="373" height="210" src="${a}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}catch(e){console.error(e)}};f=o("7IoHk");(async()=>{let t=1,r=0;const n={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${i.API_KEY}`}},o=async t=>{try{a();const e=await fetch(`${i.URL}movie/popular?language=${i.LANGUAGE}&page=${t}&api_key=${i.API_KEY}`,n),r=await e.json();return c(),r}catch(t){e(f).Notify.failure("Sorry, the server is not responding. Please try again later.")}},s=async()=>{try{const e=await fetch(`${i.URL}genre/movie/list?api_key=${i.API_KEY}`,n);return(await e.json()).genres}catch(t){e(f).Notify.failure("Sorry, the server is not responding. Please try again later.")}},d=async()=>{c();const{scrollTop:e,clientHeight:n,scrollHeight:i}=document.documentElement;if(e+n>=i-10){window.removeEventListener("scroll",d),t++;const e=await s(),n=(await o(t)).results.map((t=>{const r=t.genre_ids,n=[];for(let t=0;t<r.length;t++)for(let o=0;o<e.length;o++)r[t]===e[o].id&&n.push(e[o].name);return t.genres=n,t}));u(n),t<r&&window.addEventListener("scroll",d)}},u=e=>{e.forEach((e=>{const t=document.createElement("div");t.className="card",t.id="card";const r=e.poster_path?`${i.IMG_URL}${e.poster_path}`:"https://fotowarsztaty.com/wp-content/uploads/poster-placeholder.png",n=e.poster_path?e.original_title:"Poster Not Found";t.innerHTML=`\n          <img class="card__poster" src="${r}" alt="${n}" title="${e.original_title}" />\n        </div>\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres.join(", ")} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)}</div>\n          </div>\n        </div>`;const o=document.querySelector("#gallery");o&&(o.appendChild(t),t.addEventListener("click",(async()=>{(0,l.modalBoxShow)(e),await V(e.id)})))}))};await(async()=>{const e=await s(),n=await o(t),i=n.results.map((t=>{const r=t.genre_ids,n=[];for(let t=0;t<r.length;t++)for(let o=0;o<e.length;o++)r[t]===e[o].id&&n.push(e[o].name);return t.genres=n,t}));u(i),r=n.total_pages,t<r&&window.addEventListener("scroll",d)})()})();const V=async e=>{const t={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${i.API_KEY}`}};try{const r=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?language=${i.LANGUAGE}&api_key=${i.API_KEY}`,t);if(!r.ok)throw new Error("Network response was not ok");const n=await r.json(),{results:o}=n,a=`https://www.youtube.com/embed/${o[0].key}`;document.querySelector(".modal__trailer").innerHTML=`<iframe id="modal__trailer-video" width="373" height="210" src="${a}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}catch(e){console.error(e)}};
//# sourceMappingURL=index.1e42120c.js.map
