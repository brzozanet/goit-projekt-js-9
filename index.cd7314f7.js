function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire555a;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequire555a=o);var i=o("3479m");const a=()=>{const e=document.querySelector(".lds-ring");e&&e.classList.remove("is-hidden")},c=()=>{const e=document.querySelector(".lds-ring");e&&e.classList.add("is-hidden")};i=o("3479m");var s=o("b374K"),l=o("g9R5y");const d=new(0,s.UserMovies),u=e=>{const t=document.querySelector(".backdrop"),n=document.querySelector(".modal__btn-close"),r=document.querySelector(".modal__photo"),o=document.querySelector(".modal__title"),a=document.querySelector(".modal__stats-vote"),c=document.querySelector(".modal__stats-votes"),s=document.querySelector(".modal__popularity"),u=document.querySelector(".modal__film-title"),p=document.querySelector(".modal__genre"),m=document.querySelector(".modal__about-text");t.classList.remove("is-hidden");const v=e.poster_path?`${i.IMG_URL}${e.poster_path}`:"https://fotowarsztaty.com/wp-content/uploads/poster-placeholder.png",f=e.poster_path?e.original_title:"Poster Not Found";r.innerHTML=`<img class="posters__img" src="${v}" alt="${f}"/>`,o.innerHTML=`${e.original_title}`,a.innerHTML=`${e.vote_average}`,c.innerHTML=`${e.vote_count}`,s.innerHTML=`${e.popularity}`,u.innerHTML=`${e.original_title}`,m.innerHTML=`${e.overview}`;const{genre_ids:_}=e,y=_.map((e=>{const t=l.genres.find((t=>t.id===e));return t?t.name:""})).join(", ");p.innerHTML=y;const h=window.location.pathname;"/index.html"===h?document.querySelector(".modal__info-buttons").style.display="block":"/library.html"===h&&(document.querySelector(".modal__info-buttons").style.display="none");const g=document.querySelector("#modal__button-watched"),w=document.querySelector("#modal__button-queue");g.addEventListener("click",(()=>d.addToWatch(e))),w.addEventListener("click",(()=>d.addToQueue(e))),n.addEventListener("click",(()=>{t.classList.add("is-hidden");document.getElementById("modal__trailer-video").src=""})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&t.classList.add("is-hidden")}))};i=o("3479m"),s=o("b374K"),l=o("g9R5y");var p,m=o("7IoHk"),v={};v=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var f,_={},y={};f="object"==typeof t&&t&&t.Object===Object&&t;var h="object"==typeof self&&self&&self.Object===Object&&self,g=f||h||Function("return this")();_=function(){return y.Date.now()};var w={},$={},b={},L=/\s/;b=function(e){for(var t=e.length;t--&&L.test(e.charAt(t)););return t};var E=/^\s+/;$=function(e){return e?e.slice(0,b(e)+1).replace(E,""):e};var T,S={},k={};T=(y=g).Symbol;var q={},j=Object.prototype,N=j.hasOwnProperty,M=j.toString,O=T?T.toStringTag:void 0;q=function(e){var t=N.call(e,O),n=e[O];try{e[O]=void 0;var r=!0}catch(e){}var o=M.call(e);return r&&(t?e[O]=n:delete e[O]),o};var A={},H=Object.prototype.toString;A=function(e){return H.call(e)};var I=T?T.toStringTag:void 0;k=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I&&I in Object(e)?q(e):A(e)};var x={};x=function(e){return null!=e&&"object"==typeof e};S=function(e){return"symbol"==typeof e||x(e)&&"[object Symbol]"==k(e)};var U=/^[-+]0x[0-9a-f]+$/i,P=/^0b[01]+$/i,G=/^0o[0-7]+$/i,R=parseInt;w=function(e){if("number"==typeof e)return e;if(S(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$(e);var n=P.test(e);return n||G.test(e)?R(e.slice(2),n?2:8):U.test(e)?NaN:+e};var K=Math.max,Y=Math.min;p=function(e,t,n){var r,o,i,a,c,s,l=0,d=!1,u=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,i=o;return r=o=void 0,l=t,a=e.apply(i,n)}function f(e){var n=e-s;return void 0===s||n>=t||n<0||u&&e-l>=i}function y(){var e=_();if(f(e))return h(e);c=setTimeout(y,function(e){var n=t-(e-s);return u?Y(n,i-(e-l)):n}(e))}function h(e){return c=void 0,p&&r?m(e):(r=o=void 0,a)}function g(){var e=_(),n=f(e);if(r=arguments,o=this,s=e,n){if(void 0===c)return function(e){return l=e,c=setTimeout(y,t),d?m(e):a}(s);if(u)return clearTimeout(c),c=setTimeout(y,t),m(s)}return void 0===c&&(c=setTimeout(y,t)),a}return t=w(t)||0,v(n)&&(d=!!n.leading,i=(u="maxWait"in n)?K(w(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p),g.cancel=function(){void 0!==c&&clearTimeout(c),l=0,r=s=o=c=void 0},g.flush=function(){return void 0===c?a:h(_())},g};e(m).Notify.init({width:"280px",position:"center-top",timeout:4e3,closeButton:!1,distance:"25px",borderRadius:"10px",fontSize:"18px"});const z=new(0,s.UserMovies),F=`${i.URL}/search/movie?api_key=${i.API_KEY}&query=`,D=document.querySelector("#form"),B=document.querySelector("#search"),W=document.querySelector(".movies-container");async function C(t){try{const r=await fetch(t);if(!r.ok)throw new(e(m).Notify.warning)("Sorry, the server is not responding. Please try again later.");const o=await r.json();if(0===o.results.length)throw new(e(m).Notify.failure)("MOVIE  NOT  FOUND");n=o.results,W.innerHTML="",n.forEach((e=>{const{original_title:t,poster_path:n,vote_average:r,release_date:o,genre_ids:a}=e,c=document.createElement("div");c.classList.add("card"),c.id="card";const s=a.map((e=>{const t=l.genres.find((t=>t.id===e));return t?t.name:""})).join(", "),d=n?`${i.IMG_URL}${n}`:"https://fotowarsztaty.com/wp-content/uploads/poster-placeholder.png",p=n?t:"Poster Not Found";c.innerHTML=`\n        <img class="card__poster" src="${d}" alt="${p}" title="${t}" />\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${t}</div>\n            <div class="card__genre">${s} |</div>\n            <div class="card__release">${o.slice(0,4)} </div>\n          </div>\n        </div>\n      </div>`,W.appendChild(c),c.addEventListener("click",(async()=>{u(e),await Q(e.id)}));const m=document.querySelector("#modal__button-watched"),v=document.querySelector("#modal__button-queue");m.addEventListener("click",(()=>z.addToWatch(e))),v.addEventListener("click",(()=>z.addToQueue(e)))}))}catch(e){console.log("MOVIE  NOT  FOUND")}var n}null!==D&&D.addEventListener("input",e(p)((e=>{e.preventDefault();const t=B.value;t&&""!==t&&C(F+t)}),1e3));const Q=async e=>{const t={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${i.API_KEY}`}};try{const n=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?language=${i.LANGUAGE}&api_key=${i.API_KEY}`,t);if(!n.ok)throw new Error("Network response was not ok");const r=await n.json(),{results:o}=r,a=`https://www.youtube.com/embed/${o[0].key}`;document.querySelector(".modal__trailer").innerHTML=`<iframe id="modal__trailer-video" width="373" height="210" src="${a}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}catch(e){console.error(e)}};m=o("7IoHk");(async()=>{let t=1,n=0;const r={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${i.API_KEY}`}},o=async t=>{try{a();const e=await fetch(`${i.URL}movie/popular?language=${i.LANGUAGE}&page=${t}&api_key=${i.API_KEY}`,r),n=await e.json();return c(),n}catch(t){e(m).Notify.failure("Sorry, the server is not responding. Please try again later.")}},s=async()=>{try{const e=await fetch(`${i.URL}genre/movie/list?api_key=${i.API_KEY}`,r);return(await e.json()).genres}catch(t){e(m).Notify.failure("Sorry, the server is not responding. Please try again later.")}},l=async()=>{c();const{scrollTop:e,clientHeight:r,scrollHeight:i}=document.documentElement;if(e+r>=i-10){window.removeEventListener("scroll",l),t++;const e=await s(),r=(await o(t)).results.map((t=>{const n=t.genre_ids,r=[];for(let t=0;t<n.length;t++)for(let o=0;o<e.length;o++)n[t]===e[o].id&&r.push(e[o].name);return t.genres=r,t}));d(r),t<n&&window.addEventListener("scroll",l)}},d=e=>{e.forEach((e=>{const t=document.createElement("div");t.className="card",t.id="card";const n=e.poster_path?`${i.IMG_URL}${e.poster_path}`:"https://fotowarsztaty.com/wp-content/uploads/poster-placeholder.png",r=e.poster_path?e.original_title:"Poster Not Found";t.innerHTML=`\n          <img class="card__poster" src="${n}" alt="${r}" title="${e.original_title}" />\n        </div>\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres.join(", ")} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)}</div>\n          </div>\n        </div>`;const o=document.querySelector("#gallery");o&&(o.appendChild(t),t.addEventListener("click",(async()=>{u(e),await V(e.id)})))}))};await(async()=>{const e=await s(),r=await o(t),i=r.results.map((t=>{const n=t.genre_ids,r=[];for(let t=0;t<n.length;t++)for(let o=0;o<e.length;o++)n[t]===e[o].id&&r.push(e[o].name);return t.genres=r,t}));d(i),n=r.total_pages,t<n&&window.addEventListener("scroll",l)})()})();const V=async e=>{const t={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${i.API_KEY}`}};try{const n=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?language=${i.LANGUAGE}&api_key=${i.API_KEY}`,t);if(!n.ok)throw new Error("Network response was not ok");const r=await n.json(),{results:o}=r,a=`https://www.youtube.com/embed/${o[0].key}`;document.querySelector(".modal__trailer").innerHTML=`<iframe id="modal__trailer-video" width="373" height="210" src="${a}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}catch(e){console.error(e)}};
//# sourceMappingURL=index.cd7314f7.js.map
