{"mappings":"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","sources":["src/js/setup.js","src/js/modal.js","src/js/search-box.js","src/js/most-popular.js","src/js/loading-spinner.js","src/js/app.js"],"sourcesContent":["export const API_KEY = \"bf096adfc02b1d9503cca39671f19618\";\nexport const IMG_URL = \"https://image.tmdb.org/t/p/w500\";\nexport const URL = \"https://api.themoviedb.org/3/\";\nexport const LANGUAGE = \"en-US\";\n","export { toggleWatched, toggleQueue };\n\nwindow.addEventListener(\"load\", () => {\n  document\n    .querySelector(\"#modal__button-watched\")\n    .addEventListener(\"click\", toggleWatched);\n  document\n    .querySelector(\"#modal__button-queue\")\n    .addEventListener(\"click\", toggleQueue);\n});\n\nfunction toggleWatched() {\n  document\n    .querySelector(\"#modal__button-watched\")\n    .classList.toggle(\"button-active\");\n  if (\n    document\n      .querySelector(\"#modal__button-watched\")\n      .classList.contains(\"button-active\")\n  ) {\n    document.querySelector(\"#modal__button-watched\").textContent =\n      \"Remove from watched\";\n  } else {\n    document.querySelector(\"#modal__button-watched\").textContent =\n      \"Add to watched\";\n  }\n}\n\nfunction toggleQueue() {\n  document\n    .querySelector(\"#modal__button-queue\")\n    .classList.toggle(\"button-active\");\n  if (\n    document\n      .querySelector(\"#modal__button-queue\")\n      .classList.contains(\"button-active\")\n  ) {\n    document.querySelector(\"#modal__button-queue\").textContent =\n      \"Remove from queue\";\n  } else {\n    document.querySelector(\"#modal__button-queue\").textContent = \"Add to queue\";\n  }\n}\n","import \"../sass/main.scss\";\nimport { API_KEY, IMG_URL, URL, LANGUAGE } from \"./setup\";\n\nconst SEARCH_API = `${URL}/search/movie?api_key=${API_KEY}&query=`;\nconst API_URL = fetch(\n  // `${URL}/discover/movie?include_adult=false&include_video=false&language=${LANGUAGE}&page=1&sort_by=popularity.desc`\n  `${URL}/discover/movie?include_adult=false&include_video=false&language=${LANGUAGE}&page=1&sort_by=popularity.desc&api_key=${API_KEY}`\n)\n  .then(response => response.json())\n  .then(response => console.log(response))\n  .catch(err => console.error(err));\n\nconst form = document.getElementById(\"form\");\nconst search = document.getElementById(\"search\");\nconst moviesContainerEl = document.querySelector(\".movies-container\");\n\ngetMovies(API_URL);\n\nasync function getMovies(url) {\n  const res = await fetch(url);\n  const data = await res.json();\n\n  showMovies(data.results);\n}\n\nfunction showMovies(movies) {\n  moviesContainerEl.innerHTML = \"\";\n\n  movies.forEach(movie => {\n    // const { original_title, poster_path, vote_average, release_date, genres } = movie;\n\n    const movieEl = document.createElement(\"div\");\n    movieEl.classList.add(\"card\");\n\n    movieEl.innerHTML = `\n      <div id=\"card\" class=\"card\">\n        <img class=\"card__poster\" src=\"${IMG_URL}${movie.poster_path}\" alt=\"${\n      movie.original_title\n    }\" title=\"${movie.original_title}\" />\n        <div class=\"card__content\">\n          <div class=\"card__info\">\n            <div class=\"card__title\">${movie.original_title}</div>\n            <div class=\"card__genre\">${movie.genres} |</div>\n            <div class=\"card__release\">${movie.release_date.slice(0, 4)} |</div>\n            <div class=\"card__rating\">Rating: ${movie.vote_average}</div>\n          </div>\n        </div>\n      </div>`;\n\n    moviesContainerEl.appendChild(movieEl);\n  });\n}\n\nform.addEventListener(\"submit\", event => {\n  event.preventDefault();\n\n  const searchTerm = search.value;\n\n  if (searchTerm && searchTerm !== \"\") {\n    getMovies(SEARCH_API + searchTerm);\n\n    search.value = \"\";\n  } else {\n    window.location.reload();\n  }\n});\n","import { API_KEY, IMG_URL, URL, LANGUAGE } from \"./setup\";\nimport { showSpinner, hideSpinner } from \"./loading-spinner\";\n\nexport const fetchMostPopular = async () => {\n  let currentPage = 1;\n  // const moviesPerPage = 20;\n  let totalPages = 0;\n  const options = {\n    method: \"GET\",\n    headers: {\n      accept: \"application/json\",\n      Authorization: `Bearer ${API_KEY}`,\n    },\n  };\n\n  // const moviesContainerEl = document.querySelector(\"#gallery\");\n  const showMoreButtonEl = document.querySelector(\".show-more\");\n\n  const fetchPopularData = async page => {\n    try {\n      showSpinner();\n      const response = await fetch(\n        `${URL}movie/popular?language=${LANGUAGE}&page=${page}&api_key=${API_KEY}`,\n        options\n      );\n      const data = await response.json();\n      hideSpinner();\n      return data;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const fetchGenres = async () => {\n    try {\n      const response = await fetch(\n        `${URL}genre/movie/list?api_key=${API_KEY}`,\n        options\n      );\n      const genreNames = await response.json();\n      return genreNames.genres;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const matchGenres = async () => {\n    const genres = await fetchGenres();\n    const popularMoviesData = await fetchPopularData(currentPage);\n    const movies = popularMoviesData.results.map(movie => {\n      const movieGenresIds = movie.genre_ids;\n      const matchedGenres = [];\n      for (let i = 0; i < movieGenresIds.length; i++) {\n        for (let j = 0; j < genres.length; j++) {\n          if (movieGenresIds[i] === genres[j].id) {\n            matchedGenres.push(genres[j].name);\n          }\n        }\n      }\n      movie.genres = matchedGenres;\n      return movie;\n    });\n\n    popularMovies(movies);\n    totalPages = popularMoviesData.total_pages;\n\n    if (currentPage < totalPages) {\n      showMoreButtonEl.style.display = \"block\";\n    } else {\n      showMoreButtonEl.style.display = \"none\";\n    }\n  };\n\n  const showMoreMovies = async () => {\n    currentPage++;\n    const genres = await fetchGenres();    \n    const popularMoviesData = await fetchPopularData(currentPage);\n    const movies = popularMoviesData.results.map(movie => {\n      const movieGenresIds = movie.genre_ids;\n      const matchedGenres = [];\n      for (let i = 0; i < movieGenresIds.length; i++) {\n        for (let j = 0; j < genres.length; j++) {\n          if (movieGenresIds[i] === genres[j].id) {\n            matchedGenres.push(genres[j].name);\n          }\n        }\n      }\n      movie.genres = matchedGenres;\n      return movie;\n    });\n\n    popularMovies(movies);\n    if (currentPage === totalPages) {\n      showMoreButtonEl.style.display = \"none\";\n    }\n  };\n\n  showMoreButtonEl.addEventListener(\"click\", showMoreMovies);\n\n  const popularMovies = movies => {\n    movies.forEach(movie => {\n      const card = document.createElement(\"div\");\n      card.className = \"card\";\n      card.innerHTML = `\n        <div id=\"card\" class=\"card\" >\n          <img class=\"card__poster\" src=\"${IMG_URL}${movie.poster_path}\" alt=\"${movie.original_title}\" title=\"${movie.original_title}\" />\n        </div>\n        <div class=\"card__content\">\n          <div class=\"card__info\">\n            <div class=\"card__title\">${movie.original_title}</div>\n            <div class=\"card__genre\">${movie.genres.join(\", \")} |</div>\n            <div class=\"card__release\">${movie.release_date.slice(0, 4)}</div>\n          </div>\n        </div>`;\n      // const modalEL = document.getElementById(\"modalBox\");\n\n      const moviesContainerEl = document.querySelector(\"#gallery\");\n\n      moviesContainerEl.appendChild(card);\n      moviesContainerEl.classList.remove(\"hidden\");\n\n      // show Modal\n\n      card.addEventListener(\"click\", () => {\n        modalBoxShow(movie);\n      });\n\n      const modalBoxShow = movie => {\n        const popupEl = document.querySelector(\".backdrop\");\n        const closeBtnEl = document.querySelector(\".modal__btn-close\");\n        const imageEl = document.querySelector(\".modal__photo\");\n        const titleEl = document.querySelector(\".modal__title\");\n        const voteEl = document.querySelector(\".modal__stats-vote\");\n        const votesEl = document.querySelector(\".modal__stats-votes\");\n        const popularityEl = document.querySelector(\".modal__popularity\");\n        const originalTitleEl = document.querySelector(\".modal__film-title\");\n        const genreEl = document.querySelector(\".modal__genre\");\n        const aboutEl = document.querySelector(\".modal__about-text\");\n\n        popupEl.classList.remove(\"is-hidden\");\n        moviesContainerEl.classList.add(\"hidden\");\n        imageEl.src = `${IMG_URL}${movie.poster_path}`;\n        titleEl.innerHTML = `${movie.original_title}`;\n        voteEl.innerHTML = `${movie.vote_average}`;\n        votesEl.innerHTML = `${movie.vote_count}`;\n        popularityEl.innerHTML = `${movie.popularity}`;\n        originalTitleEl.innerHTML = `${movie.original_title}`;\n        genreEl.innerHTML = `${movie.genres.join(\", \")}`;\n        aboutEl.innerHTML = `${movie.overview}`;\n\n        // hide Modal\n\n        closeBtnEl.addEventListener(\"click\", () => {\n          popupEl.classList.add(\"is-hidden\");\n          moviesContainerEl.classList.remove(\"hidden\");\n        });\n\n        window.addEventListener(\"keyup\", e => {\n          if (e.key === \"Escape\") {\n            popupEl.classList.add(\"is-hidden\");\n          }\n        });\n\n        window.addEventListener(\"keyup\", e => {\n          if (e.key === \"Escape\") {\n            popupEl.classList.add(\"is-hidden\");\n            moviesContainerEl.classList.remove(\"hidden\");\n          }\n        });\n        \n        window.addEventListener(\"click\", e => {\n          if (e.target.classList.contains(\"backdrop\")) {\n            popupEl.classList.add(\"is-hidden\");\n            moviesContainerEl.classList.remove(\"hidden\");\n          }\n        });\n      };\n    });\n  };\n\n  // const genres = await fetchGenres();\n  await matchGenres();\n};\n\n// fetchMostPopular();\n","export const showSpinner = () => {\n  const spinnerEl = document.querySelector(\".lds-ring\");\n  spinnerEl.style.display = \"inline-block\";\n};\n\nexport const hideSpinner = () => {\n  const spinnerEl = document.querySelector(\".lds-ring\");\n  spinnerEl.style.display = \"none\";\n};\n","import \"../sass/main.scss\";\nimport { fetchMostPopular } from \"./most-popular\";\nimport { toggleWatched, toggleQueue } from \"./modal\";\nimport { showSpinner, hideSpinner } from \"./loading-spinner\";\nimport \"./search-box\";\n\nfetchMostPopular();\n"],"names":["$23b74aa3aeac62a3$export$a9861bd62f48e142","$23b74aa3aeac62a3$export$1d6744690e556718","$23b74aa3aeac62a3$export$61abde59b50deb8e","$23b74aa3aeac62a3$export$a24496dc2b29f9aa","$2ea800676e6f7669$export$db8da8110682733b","document","querySelector","classList","toggle","contains","textContent","$2ea800676e6f7669$export$c6104e1232c627ca","window","addEventListener","$e240c31068c50c0a$var$SEARCH_API","$e240c31068c50c0a$var$API_URL","fetch","then","response","json","console","log","catch","err","error","$e240c31068c50c0a$var$form","getElementById","$e240c31068c50c0a$var$search","$e240c31068c50c0a$var$moviesContainerEl","async","$e240c31068c50c0a$var$getMovies","url","res","data","movies","results","innerHTML","forEach","movie","movieEl","createElement","add","poster_path","original_title","genres","release_date","slice","vote_average","appendChild","event","preventDefault","searchTerm","value","location","reload","currentPage","totalPages","options","method","headers","accept","Authorization","showMoreButtonEl","fetchPopularData","page","style","display","fetchGenres","map","movieGenresIds","genre_ids","matchedGenres","i","length","j","id","push","name","popularMovies","card","className","join","moviesContainerEl","remove","modalBoxShow","popupEl","closeBtnEl","imageEl","titleEl","voteEl","votesEl","popularityEl","originalTitleEl","genreEl","aboutEl","src","vote_count","popularity","overview","e","key","target","popularMoviesData","total_pages","matchGenres"],"version":3,"file":"index.efd6d4ba.js.map"}