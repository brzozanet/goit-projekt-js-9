const e="bf096adfc02b1d9503cca39671f19618",t="https://image.tmdb.org/t/p/w500",n="https://api.themoviedb.org/3/",o="en-US",a=()=>{const e=document.querySelector(".lds-ring");e&&(e.style.display="block")},i=()=>{const e=document.querySelector(".lds-ring");e&&(e.style.display="none")};class r{#e=[];#t=[];constructor(){const e=JSON.parse(localStorage.getItem("watched-movies")),t=JSON.parse(localStorage.getItem("queued-movies"));this.#e=e||[],this.#t=t||[]}get watched(){return this.#e}get queued(){return this.#t}isAdded(e,t){for(let n=0;n<t.length;n++)if(+t[n].id==+e.id)return!1;return!0}addToWatch(e){this.isAdded(e,this.#e)&&(this.#e.push(e),localStorage.setItem("watched-movies",JSON.stringify(this.#e)))}addToQueue(e){this.isAdded(e,this.#t)&&(this.#t.push(e),localStorage.setItem("queued-movies",JSON.stringify(this.#t)))}}const d=new r,s=e=>{const n=document.querySelector(".backdrop"),o=document.querySelector(".modal__btn-close"),a=document.querySelector(".modal__photo"),i=document.querySelector(".modal__title"),r=document.querySelector(".modal__stats-vote"),s=document.querySelector(".modal__stats-votes"),c=document.querySelector(".modal__popularity"),l=document.querySelector(".modal__film-title"),u=document.querySelector(".modal__genre"),m=document.querySelector(".modal__about-text");n.classList.remove("is-hidden");const h=e.poster_path?`${t}${e.poster_path}`:"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png",p=e.poster_path?e.original_title:"Poster Not Found";a.innerHTML=`<img class="posters__img" src="${h}" alt="${p}"/>`,i.innerHTML=`${e.original_title}`,r.innerHTML=`${e.vote_average}`,s.innerHTML=`${e.vote_count}`,c.innerHTML=`${e.popularity}`,l.innerHTML=`${e.original_title}`,u.innerHTML=`${e.genres.join(", ")}`,m.innerHTML=`${e.overview}`;const _=document.querySelector("#modal__button-watched"),w=document.querySelector("#modal__button-queue");_.addEventListener("click",(()=>d.addToWatch(e))),w.addEventListener("click",(()=>d.addToQueue(e))),o.addEventListener("click",(()=>{n.classList.add("is-hidden");document.getElementById("modal__trailer-video").src=""})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&n.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&n.classList.add("is-hidden")})),window.addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&n.classList.add("is-hidden")}))},c=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],l=new r,u=`${n}/search/movie?api_key=${e}&query=`,m=document.querySelector("#form"),h=document.querySelector("#search"),p=document.querySelector(".movies-container");async function _(e){try{const o=await fetch(e);if(!o.ok)throw new Error("Network response was not ok");const a=await o.json();n=a.results,p.innerHTML="",n.forEach((e=>{const{original_title:n,poster_path:o,vote_average:a,release_date:i,genre_ids:r}=e,d=document.createElement("div");d.classList.add("card");const u=r.map((e=>c.find((t=>t.id===e)).name)).join(", "),m=o?`${t}${o}`:"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png",h=o?n:"Poster Not Found";d.innerHTML=`\n      <div id="card" class="card">\n        <img class="card__poster" src="${m}" alt="${h}" title="${n}" />\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${n}</div>\n            <div class="card__genre">${u} |</div>\n            <div class="card__release">${i.slice(0,4)} </div>\n          </div>\n        </div>\n      </div>`,p.appendChild(d),d.addEventListener("click",(()=>{s(e)}));const _=document.querySelector("#modal__button-watched"),w=document.querySelector("#modal__button-queue");_.addEventListener("click",(()=>l.addToWatch(e))),w.addEventListener("click",(()=>l.addToQueue(e)))}))}catch(e){console.error(e)}var n}null!==m&&m.addEventListener("input",(()=>{const e=h.value;if(e&&""!==e){_(u+e)}else window.location.reload()}));(async()=>{let r=1,d=0;const c={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${e}`}},l=async t=>{try{a();const r=await fetch(`${n}movie/popular?language=${o}&page=${t}&api_key=${e}`,c),d=await r.json();return i(),d}catch(e){console.error(e)}},u=async()=>{try{const t=await fetch(`${n}genre/movie/list?api_key=${e}`,c);return(await t.json()).genres}catch(e){console.error(e)}},m=async()=>{const{scrollTop:e,clientHeight:t,scrollHeight:n}=document.documentElement;if(e+t>=n-10){window.removeEventListener("scroll",m),r++;const e=await u(),t=(await l(r)).results.map((t=>{const n=t.genre_ids,o=[];for(let t=0;t<n.length;t++)for(let a=0;a<e.length;a++)n[t]===e[a].id&&o.push(e[a].name);return t.genres=o,t}));h(t),r<d&&window.addEventListener("scroll",m)}},h=e=>{e.forEach((e=>{const n=document.createElement("div");n.className="card";const o=e.poster_path?`${t}${e.poster_path}`:"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png",a=e.poster_path?e.original_title:"Poster Not Found";n.innerHTML=`\n        <div id="card" class="card" >\n          <img class="card__poster" src="${o}" alt="${a}" title="${e.original_title}" />\n        </div>\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres.join(", ")} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)}</div>\n          </div>\n        </div>`;const i=document.querySelector("#gallery");i&&(i.appendChild(n),n.addEventListener("click",(async()=>{s(e),await w(e.id)})))}))};await(async()=>{const e=await u(),t=await l(r),n=t.results.map((t=>{const n=t.genre_ids,o=[];for(let t=0;t<n.length;t++)for(let a=0;a<e.length;a++)n[t]===e[a].id&&o.push(e[a].name);return t.genres=o,t}));h(n),d=t.total_pages,r<d&&window.addEventListener("scroll",m)})()})();const w=async t=>{const n={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${e}`}};try{const a=await fetch(`https://api.themoviedb.org/3/movie/${t}/videos?language=${o}&api_key=${e}`,n);if(!a.ok)throw new Error("Network response was not ok");const i=await a.json(),{results:r}=i,d=`https://www.youtube.com/embed/${r[0].key}`;document.querySelector(".modal__trailer").innerHTML=`<iframe id="modal__trailer-video" width="373" height="210" src="${d}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,console.log(d)}catch(e){console.error(e)}};
//# sourceMappingURL=index.b4321fde.js.map
