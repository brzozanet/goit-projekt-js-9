function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequire555a;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire555a=a),a.register("3479m",(function(t,n){e(t.exports,"API_KEY",(()=>o)),e(t.exports,"IMG_URL",(()=>a)),e(t.exports,"URL",(()=>i)),e(t.exports,"LANGUAGE",(()=>d));const o="bf096adfc02b1d9503cca39671f19618",a="https://image.tmdb.org/t/p/w500",i="https://api.themoviedb.org/3/",d="en-US"}));var i=a("3479m");class d{#e=[];#t=[];constructor(){const e=JSON.parse(localStorage.getItem("watched-movies")),t=JSON.parse(localStorage.getItem("queued-movies"));this.#e=e||[],this.#t=t||[]}get watched(){return this.#e}get queued(){return this.#t}isAdded(e,t){for(let n=0;n<t.length;n++)if(+t[n].id==+e.id)return!1;return!0}addToWatch(e){this.isAdded(e,this.#e)&&(this.#e.push(e),localStorage.setItem("watched-movies",JSON.stringify(this.#e)))}addToQueue(e){this.isAdded(e,this.#t)&&(this.#t.push(e),localStorage.setItem("queued-movies",JSON.stringify(this.#t)))}}i=a("3479m");const r=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],s=new d,c=`${i.URL}/search/movie?api_key=${i.API_KEY}&query=`,l=`${i.URL}/discover/movie?include_adult=false&include_video=false&language=${i.LANGUAGE}&page=1&sort_by=popularity.desc&api_key=${i.API_KEY}`,u=document.querySelector("#form"),m=document.querySelector("#search"),_=document.querySelector(".movies-container");async function p(e){try{const n=await fetch(e);if(!n.ok)throw new Error("Network response was not ok");const o=await n.json();t=o.results,_.innerHTML="",t.forEach((e=>{const{original_title:t,poster_path:n,vote_average:o,release_date:a,genre_ids:d}=e,c=document.createElement("div");c.classList.add("card");const l=d.map((e=>r.find((t=>t.id===e)).name)).join(", "),u=n?`${i.IMG_URL}${n}`:"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png",m=n?t:"Poster Not Found";c.innerHTML=`\n  <div id="card" class="card">\n    <img class="card__poster" src="${u}" alt="${m}" title="${t}" />\n    <div class="card__content">\n      <div class="card__info">\n        <div class="card__title">${t}</div>\n        <div class="card__genre">${l} |</div>\n        <div class="card__release">${a.slice(0,4)} </div>\n      </div>\n    </div>\n  </div>`,_.appendChild(c),c.addEventListener("click",(()=>{p(e)}));const p=e=>{const t=document.querySelector(".backdrop"),n=document.querySelector(".modal__btn-close"),o=document.querySelector(".modal__photo"),a=document.querySelector(".modal__title"),d=document.querySelector(".modal__stats-vote"),r=document.querySelector(".modal__stats-votes"),c=document.querySelector(".modal__popularity"),u=document.querySelector(".modal__film-title"),m=document.querySelector(".modal__genre"),_=document.querySelector(".modal__about-text");t.classList.remove("is-hidden");const p=e.poster_path?`${i.IMG_URL}${e.poster_path}`:"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png",h=e.poster_path?e.original_title:"Poster Not Found";o.innerHTML=`<img class="posters__img" src="${p}" alt="${h}"/>`,a.innerHTML=`${e.original_title}`,d.innerHTML=`${e.vote_average}`,r.innerHTML=`${e.vote_count}`,c.innerHTML=`${e.popularity}`,u.innerHTML=`${e.original_title}`,m.innerHTML=`${l}`,_.innerHTML=`${e.overview}`;const v=document.querySelector("#modal__button-watched"),g=document.querySelector("#modal__button-queue");v.addEventListener("click",(()=>s.addToWatch(e))),g.addEventListener("click",(()=>s.addToQueue(e))),n.addEventListener("click",(()=>{t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&t.classList.add("is-hidden")}))}}))}catch(e){console.error(e)}var t}p(l),u.addEventListener("input",(()=>{const e=m.value;if(e&&""!==e){p(c+e)}else window.location.reload()}));const h=new d;(async()=>{let e=1,t=0;const n={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${i.API_KEY}`}},o=async e=>{try{document.querySelector(".lds-ring").style.display="flex";const t=await fetch(`${i.URL}movie/popular?language=${i.LANGUAGE}&page=${e}&api_key=${i.API_KEY}`,n),o=await t.json();return document.querySelector(".lds-ring").style.display="none",o}catch(e){console.error(e)}},a=async()=>{try{const e=await fetch(`${i.URL}genre/movie/list?api_key=${i.API_KEY}`,n);return(await e.json()).genres}catch(e){console.error(e)}},d=async()=>{const{scrollTop:n,clientHeight:i,scrollHeight:s}=document.documentElement;if(n+i>=s-10){window.removeEventListener("scroll",d),e++;const n=await a(),i=(await o(e)).results.map((e=>{const t=e.genre_ids,o=[];for(let e=0;e<t.length;e++)for(let a=0;a<n.length;a++)t[e]===n[a].id&&o.push(n[a].name);return e.genres=o,e}));r(i),e<t&&window.addEventListener("scroll",d)}},r=e=>{e.forEach((e=>{const t=document.createElement("div");t.className="card";const n=e.poster_path?`${i.IMG_URL}${e.poster_path}`:"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png",o=e.poster_path?e.original_title:"Poster Not Found";t.innerHTML=`\n        <div id="card" class="card" >\n          <img class="card__poster" src="${n}" alt="${o}" title="${e.original_title}" />\n        </div>\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres.join(", ")} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)}</div>\n          </div>\n        </div>`;document.querySelector("#gallery").appendChild(t),t.addEventListener("click",(()=>{a(e)}));const a=e=>{const t=document.querySelector(".backdrop"),n=document.querySelector(".modal__btn-close"),o=document.querySelector(".modal__photo"),a=document.querySelector(".modal__title"),d=document.querySelector(".modal__stats-vote"),r=document.querySelector(".modal__stats-votes"),s=document.querySelector(".modal__popularity"),c=document.querySelector(".modal__film-title"),l=document.querySelector(".modal__genre"),u=document.querySelector(".modal__about-text");t.classList.remove("is-hidden");const m=e.poster_path?`${i.IMG_URL}${e.poster_path}`:"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png",_=e.poster_path?e.original_title:"Poster Not Found";o.innerHTML=`<img class="posters__img" src="${m}" alt="${_}"/>`,a.innerHTML=`${e.original_title}`,d.innerHTML=`${e.vote_average}`,r.innerHTML=`${e.vote_count}`,s.innerHTML=`${e.popularity}`,c.innerHTML=`${e.original_title}`,l.innerHTML=`${e.genres.join(", ")}`,u.innerHTML=`${e.overview}`;const p=document.querySelector("#modal__button-watched"),v=document.querySelector("#modal__button-queue");p.addEventListener("click",(()=>h.addToWatch(e))),v.addEventListener("click",(()=>h.addToQueue(e))),n.addEventListener("click",(()=>{t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&t.classList.add("is-hidden")}))}}))};await(async()=>{const n=await a(),i=await o(e),s=i.results.map((e=>{const t=e.genre_ids,o=[];for(let e=0;e<t.length;e++)for(let a=0;a<n.length;a++)t[e]===n[a].id&&o.push(n[a].name);return e.genres=o,e}));r(s),t=i.total_pages,e<t&&window.addEventListener("scroll",d)})()})();
//# sourceMappingURL=index.66971c39.js.map
