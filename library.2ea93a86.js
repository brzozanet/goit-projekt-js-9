var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},r=e.parcelRequire555a;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in i){var r=i[e];delete i[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},e.parcelRequire555a=r);var n=r("3479m");r("b374K");n=r("3479m");new(0,r("b374K").UserMovies);const a=e=>{const t=document.querySelector(".backdrop"),i=document.querySelector(".modal__btn-close"),r=document.querySelector(".modal__photo"),a=document.querySelector(".modal__title"),d=document.querySelector(".modal__stats-vote"),o=document.querySelector(".modal__stats-votes"),s=document.querySelector(".modal__popularity"),l=document.querySelector(".modal__film-title"),c=document.querySelector(".modal__genre"),u=document.querySelector(".modal__about-text");t.classList.remove("is-hidden"),r.innerHTML=`<img src="${n.IMG_URL}${e.poster_path}" alt="${e.original_title}" class="modal__photo">`,a.innerHTML=`${e.original_title}`,d.innerHTML=`${e.vote_average}`,o.innerHTML=`${e.vote_count}`,s.innerHTML=`${e.popularity}`,l.innerHTML=`${e.original_title}`,c.innerHTML=`${e.genres}`,u.innerHTML=`${e.overview}`;const _=document.querySelector("#modal__button-watched"),m=document.querySelector("#modal__button-queue");_.classList.add("is-hidden"),m.classList.add("is-hidden"),i.addEventListener("click",(()=>{t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&t.classList.add("is-hidden")}))};r("7IoHk");let d=JSON.parse(localStorage.getItem("watched-movies")),o=JSON.parse(localStorage.getItem("queued-movies"));const s=document.querySelector("#library-watched"),l=document.querySelector("#library-queued");if(d&&Array.isArray(d)){(e=>{e.forEach((e=>{const t=document.createElement("div");t.className="card",t.innerHTML=`\n          <div id="card" class="card" >\n            <img class="card__poster" src="${n.IMG_URL}${e.poster_path}" alt="${e.original_title}" title="${e.original_title}" />\n          </div>\n          <div class="card__content">\n            <div class="card__info">\n              <div class="card__title">${e.original_title}</div>\n              <div class="card__genre">${e.genres.join(", ")} |</div>\n              <div class="card__release">${e.release_date.slice(0,4)}</div>\n            </div>\n          </div>`,t.addEventListener("click",(async()=>{a(e),await p(e.id)})),s.appendChild(t),s.classList.remove("hiddenColor")}))})(d)}else{const e=document.createElement("div");e.innerHTML='\n    <p class="library__title">\n        <strong>You have no watched movies.</strong><br /><a href="index.html">Select first movie</a> and click "Add to watched" button.\n    </p>',s.appendChild(e)}if(o&&Array.isArray(o)){(e=>{e.forEach((e=>{const t=document.createElement("div");t.className="card",t.innerHTML=`\n          <div id="card" class="card" >\n            <img class="card__poster" src="${n.IMG_URL}${e.poster_path}" alt="${e.original_title}" title="${e.original_title}" />\n          </div>\n          <div class="card__content">\n            <div class="card__info">\n              <div class="card__title">${e.original_title}</div>\n              <div class="card__genre">${e.genres.join(", ")} |</div>\n              <div class="card__release">${e.release_date.slice(0,4)}</div>\n            </div>\n          </div>`,t.addEventListener("click",(()=>{a(e)})),l.appendChild(t),l.classList.remove("hiddenColor")}))})(o)}else{const e=document.createElement("div");e.innerHTML='\n    <p class="library__title">\n        <strong>You have no queued movies.</strong><br /><a href="index.html">Select first movie</a> and click "Add to queue" button.\n    </p>',l.appendChild(e)}const c=document.querySelector("#button-watched"),u=document.querySelector("#button-queue"),_=document.querySelector("#library-watched"),m=document.querySelector("#library-queued"),v=document.querySelector("#library-info");c.addEventListener("click",(()=>{_.classList.remove("hidden-in-library"),m.classList.add("hidden-in-library"),v.classList.add("hidden-in-library")})),u.addEventListener("click",(()=>{_.classList.add("hidden-in-library"),m.classList.remove("hidden-in-library"),v.classList.add("hidden-in-library")}));const p=async e=>{const t={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${n.API_KEY}`}};try{const i=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?language=${n.LANGUAGE}&api_key=${n.API_KEY}`,t);if(!i.ok)throw new Error("Network response was not ok");const r=await i.json(),{results:a}=r,d=`https://www.youtube.com/embed/${a[0].key}`;document.querySelector(".modal__trailer").innerHTML=`<iframe id="modal__trailer-video" width="373" height="210" src="${d}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,console.log(d)}catch(e){console.error(e)}};
//# sourceMappingURL=library.2ea93a86.js.map
