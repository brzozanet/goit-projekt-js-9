function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequire555a;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequire555a=i),i.register("3479m",(function(t,n){e(t.exports,"API_KEY",(()=>a)),e(t.exports,"IMG_URL",(()=>i)),e(t.exports,"URL",(()=>r)),e(t.exports,"LANGUAGE",(()=>s));const a="bf096adfc02b1d9503cca39671f19618",i="https://image.tmdb.org/t/p/w500",r="https://api.themoviedb.org/3/",s="en-US"}));var r=i("3479m");const s=new class{#e=[];#t=[];constructor(){const e=JSON.parse(localStorage.getItem("watched-movies")),t=JSON.parse(localStorage.getItem("queued-movies"));this.#e=e||[],this.#t=t||[]}get watched(){return this.#e}get queued(){return this.#t}isAdded(e,t){for(let n=0;n<t.length;n++)if(+t[n].id==+e.id)return!1;return!0}addToWatch(e){this.isAdded(e,this.#e)&&(this.#e.push(e),localStorage.setItem("watched-movies",JSON.stringify(this.#e)))}addToQueue(e){this.isAdded(e,this.#t)&&(this.#t.push(e),localStorage.setItem("queued-movies",JSON.stringify(this.#t)))}};const d=`${(r=i("3479m")).URL}/search/movie?api_key=${r.API_KEY}&query=`,o=fetch(`${r.URL}/discover/movie?include_adult=false&include_video=false&language=${r.LANGUAGE}&page=1&sort_by=popularity.desc&api_key=${r.API_KEY}`).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.error(e))),c=document.getElementById("form"),l=document.getElementById("search"),u=document.querySelector(".movies-container");async function _(e){const t=await fetch(e),n=await t.json();var a;a=n.results,u.innerHTML="",a.forEach((e=>{const t=document.createElement("div");t.classList.add("card"),t.innerHTML=`\n      <div id="card" class="card">\n        <img class="card__poster" src="${r.IMG_URL}${e.poster_path}" alt="${e.original_title}" title="${e.original_title}" />\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)} |</div>\n            <div class="card__rating">Rating: ${e.vote_average}</div>\n          </div>\n        </div>\n      </div>`,u.appendChild(t)}))}_(o),c.addEventListener("submit",(e=>{e.preventDefault();const t=l.value;t&&""!==t?(_(d+t),l.value=""):window.location.reload()})),(async()=>{let e=1,t=0;const n={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${r.API_KEY}`}},a=document.querySelector(".show-more"),i=async e=>{try{document.querySelector(".lds-ring").style.display="inline-block";const t=await fetch(`${r.URL}movie/popular?language=${r.LANGUAGE}&page=${e}&api_key=${r.API_KEY}`,n),a=await t.json();return document.querySelector(".lds-ring").style.display="none",a}catch(e){console.error(e)}},d=async()=>{try{const e=await fetch(`${r.URL}genre/movie/list?api_key=${r.API_KEY}`,n);return(await e.json()).genres}catch(e){console.error(e)}};a.addEventListener("click",(async()=>{e++;const n=await d(),r=(await i(e)).results.map((e=>{const t=e.genre_ids,a=[];for(let e=0;e<t.length;e++)for(let i=0;i<n.length;i++)t[e]===n[i].id&&a.push(n[i].name);return e.genres=a,e}));o(r),e===t&&(a.style.display="hidden")}));const o=e=>{e.forEach((e=>{const t=document.createElement("div");t.className="card",t.innerHTML=`\n        <div id="card" class="card" >\n          <img class="card__poster" src="${r.IMG_URL}${e.poster_path}" alt="${e.original_title}" title="${e.original_title}" />\n        </div>\n        <div class="card__content">\n          <div class="card__info">\n            <div class="card__title">${e.original_title}</div>\n            <div class="card__genre">${e.genres.join(", ")} |</div>\n            <div class="card__release">${e.release_date.slice(0,4)}</div>\n          </div>\n        </div>`;const n=document.querySelector("#gallery");n.appendChild(t),n.classList.remove("hiddenColor"),t.addEventListener("click",(()=>{a(e)}));const a=e=>{const t=document.querySelector(".backdrop"),a=document.querySelector(".modal__btn-close"),i=document.querySelector(".modal__photo"),d=document.querySelector(".modal__title"),o=document.querySelector(".modal__stats-vote"),c=document.querySelector(".modal__stats-votes"),l=document.querySelector(".modal__popularity"),u=document.querySelector(".modal__film-title"),_=document.querySelector(".modal__genre"),h=document.querySelector(".modal__about-text");t.classList.remove("is-hidden"),n.classList.add("hiddenColor"),i.src=`${r.IMG_URL}${e.poster_path}`,d.innerHTML=`${e.original_title}`,o.innerHTML=`${e.vote_average}`,c.innerHTML=`${e.vote_count}`,l.innerHTML=`${e.popularity}`,u.innerHTML=`${e.original_title}`,_.innerHTML=`${e.genres.join(", ")}`,h.innerHTML=`${e.overview}`;const m=document.querySelector("#modal__button-watched"),v=document.querySelector("#modal__button-queue");m.addEventListener("click",(()=>s.addToWatch(e))),v.addEventListener("click",(()=>s.addToQueue(e))),a.addEventListener("click",(()=>{t.classList.add("is-hidden"),n.classList.remove("hiddenColor")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.add("is-hidden")})),window.addEventListener("keyup",(e=>{"Escape"===e.key&&(t.classList.add("is-hidden"),n.classList.remove("hiddenColor"))})),window.addEventListener("click",(e=>{e.target.classList.contains("backdrop")&&(t.classList.add("is-hidden"),n.classList.remove("hiddenColor"))}))}}))};await(async()=>{const n=await d(),r=await i(e),s=r.results.map((e=>{const t=e.genre_ids,a=[];for(let e=0;e<t.length;e++)for(let i=0;i<n.length;i++)t[e]===n[i].id&&a.push(n[i].name);return e.genres=a,e}));o(s),t=r.total_pages,a.style.display=e<t?"block":"hidden"})()})();
//# sourceMappingURL=index.f1dd0cbc.js.map
