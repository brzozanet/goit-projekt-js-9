{"mappings":"4hBAwDA,IAAIA,EAAgBC,KAAKC,MAAMC,aAAaC,QAAQ,mBAChDC,EAAeJ,KAAKC,MAAMC,aAAaC,QAAQ,kBAEnD,MAAME,EAA2BC,SAASC,cAAc,oBAClDC,EAA0BF,SAASC,cAAc,mBAEvD,GAAIR,GAAiBU,MAAMC,QAAQX,GAAgB,CACvB,CAAAY,IACxBA,EAAOC,SAAQC,IACb,MAAMC,EAAOR,SAASS,cAAc,OACpCD,EAAKE,UAAY,OACjBF,EAAKG,UAAY,yFAEsBC,EAAAC,UACrCN,EAAMO,qBACEP,EAAMQ,0BAA0BR,EAAMQ,6JAIbR,EAAMQ,gEACNR,EAAMS,OAAOC,KAAK,2DAChBV,EAAMW,aAAaC,MAAM,EAAG,iDAGjEX,EAAKY,iBAAiB,SAAS,MAC7B,EAAAC,EAAAC,cAAaf,EAAA,IAEfR,EAAyBwB,YAAYf,GACrCT,EAAyByB,UAAUC,OAAO,iBAC5C,EAEFC,CAAkBjC,EACpB,KAAO,CACL,MAAMkC,EAAkB3B,SAASS,cAAc,OAC/CkB,EAAgBhB,UAAY,uLAI5BZ,EAAyBwB,YAAYI,EACvC,CAEA,GAAI7B,GAAgBK,MAAMC,QAAQN,GAAe,CACtB,CAAAO,IACvBA,EAAOC,SAAQC,IACb,MAAMC,EAAOR,SAASS,cAAc,OACpCD,EAAKE,UAAY,OACjBF,EAAKG,UAAY,yFAEsBC,EAAAC,UACrCN,EAAMO,qBACEP,EAAMQ,0BAA0BR,EAAMQ,6JAIbR,EAAMQ,gEACNR,EAAMS,OAAOC,KAAK,2DAChBV,EAAMW,aAAaC,MAAM,EAAG,iDAGjEX,EAAKY,iBAAiB,SAAS,MAC7B,EAAAC,EAAAC,cAAaf,EAAA,IAEfL,EAAwBqB,YAAYf,GACpCN,EAAwBsB,UAAUC,OAAO,iBAC3C,EAEFG,CAAiB9B,EACnB,KAAO,CACL,MAAM+B,EAAiB7B,SAASS,cAAc,OAC9CoB,EAAelB,UAAY,oLAI3BT,EAAwBqB,YAAYM,EACtC,CAEA,MAAMC,EAAe9B,SAASC,cAAc,mBACtC8B,EAAa/B,SAASC,cAAc,iBACpC+B,EAAehC,SAASC,cAAc,oBACtCgC,EAAcjC,SAASC,cAAc,mBACrCiC,EAAgBlC,SAASC,cAAc,iBAE7C6B,EAAaV,iBAAiB,SAAS,KACrCY,EAAaR,UAAUC,OAAO,qBAC9BQ,EAAYT,UAAUW,IAAI,qBAC1BD,EAAcV,UAAUW,IAAI,wBAG9BJ,EAAWX,iBAAiB,SAAS,KACnCY,EAAaR,UAAUW,IAAI,qBAC3BF,EAAYT,UAAUC,OAAO,qBAC7BS,EAAcV,UAAUW,IAAI","sources":["src/js/library.js"],"sourcesContent":["import \"../sass/main.scss\";\nimport { API_KEY, IMG_URL, URL, LANGUAGE } from \"./setup\";\nimport { UserMovies } from \"./local-storage\";\nimport { modalBoxShow } from \"./modal\";\nimport Notiflix from \"notiflix\";\n\nlet currentPage = 1;\nlet totalPages = 0;\n\nconst fetchPopularData = async page => {\n  try {\n    // showSpinner();\n    const response = await fetch(\n      `${URL}movie/popular?language=${LANGUAGE}&page=${page}&api_key=${API_KEY}`\n    );\n    const data = await response.json();\n    // hideSpinner();\n    return data;\n  } catch (error) {\n    Notiflix.Notify.failure(\n      \"Sorry, the server is not responding. Please try again later.\"\n    );\n  }\n};\n\nconst fetchGenres = async () => {\n  try {\n    const response = await fetch(`${URL}genre/movie/list?api_key=${API_KEY}`);\n    const genreNames = await response.json();\n    return genreNames.genres;\n  } catch (error) {\n    Notiflix.Notify.failure(\n      \"Sorry, the server is not responding. Please try again later.\"\n    );\n  }\n};\n\nconst matchGenres = async () => {\n  const genres = await fetchGenres();\n  const popularMoviesData = await fetchPopularData(currentPage);\n  const movies = popularMoviesData.results.map(movie => {\n    const movieGenresIds = movie.genre_ids;\n    const matchedGenres = [];\n    for (let i = 0; i < movieGenresIds.length; i++) {\n      for (let j = 0; j < genres.length; j++) {\n        if (movieGenresIds[i] === genres[j].id) {\n          matchedGenres.push(genres[j].name);\n        }\n      }\n    }\n    movie.genres = matchedGenres;\n    return movie;\n  });\n  return movies;\n};\n\nlet watchedMovies = JSON.parse(localStorage.getItem(\"watched-movies\"));\nlet queuedMovies = JSON.parse(localStorage.getItem(\"queued-movies\"));\n\nconst watchedMoviesContainerEl = document.querySelector(\"#library-watched\");\nconst queuedMoviesContainerEl = document.querySelector(\"#library-queued\");\n\nif (watchedMovies && Array.isArray(watchedMovies)) {\n  const showWatchedMovies = movies => {\n    movies.forEach(movie => {\n      const card = document.createElement(\"div\");\n      card.className = \"card\";\n      card.innerHTML = `\n          <div id=\"card\" class=\"card\" >\n            <img class=\"card__poster\" src=\"${IMG_URL}${\n        movie.poster_path\n      }\" alt=\"${movie.original_title}\" title=\"${movie.original_title}\" />\n          </div>\n          <div class=\"card__content\">\n            <div class=\"card__info\">\n              <div class=\"card__title\">${movie.original_title}</div>\n              <div class=\"card__genre\">${movie.genres.join(\", \")} |</div>\n              <div class=\"card__release\">${movie.release_date.slice(0, 4)}</div>\n            </div>\n          </div>`;\n      card.addEventListener(\"click\", () => {\n        modalBoxShow(movie);\n      });\n      watchedMoviesContainerEl.appendChild(card);\n      watchedMoviesContainerEl.classList.remove(\"hiddenColor\");\n    });\n  };\n  showWatchedMovies(watchedMovies);\n} else {\n  const noWatchedMovies = document.createElement(\"div\");\n  noWatchedMovies.innerHTML = `\n    <p class=\"library__title\">\n        <strong>You have no watched movies.</strong><br /><a href=\"index.html\">Select first movie</a> and click \"Add to watched\" button.\n    </p>`;\n  watchedMoviesContainerEl.appendChild(noWatchedMovies);\n}\n\nif (queuedMovies && Array.isArray(queuedMovies)) {\n  const showQueuedMovies = movies => {\n    movies.forEach(movie => {\n      const card = document.createElement(\"div\");\n      card.className = \"card\";\n      card.innerHTML = `\n          <div id=\"card\" class=\"card\" >\n            <img class=\"card__poster\" src=\"${IMG_URL}${\n        movie.poster_path\n      }\" alt=\"${movie.original_title}\" title=\"${movie.original_title}\" />\n          </div>\n          <div class=\"card__content\">\n            <div class=\"card__info\">\n              <div class=\"card__title\">${movie.original_title}</div>\n              <div class=\"card__genre\">${movie.genres.join(\", \")} |</div>\n              <div class=\"card__release\">${movie.release_date.slice(0, 4)}</div>\n            </div>\n          </div>`;\n      card.addEventListener(\"click\", () => {\n        modalBoxShow(movie);\n      });\n      queuedMoviesContainerEl.appendChild(card);\n      queuedMoviesContainerEl.classList.remove(\"hiddenColor\");\n    });\n  };\n  showQueuedMovies(queuedMovies);\n} else {\n  const noQueuedMovies = document.createElement(\"div\");\n  noQueuedMovies.innerHTML = `\n    <p class=\"library__title\">\n        <strong>You have no queued movies.</strong><br /><a href=\"index.html\">Select first movie</a> and click \"Add to queue\" button.\n    </p>`;\n  queuedMoviesContainerEl.appendChild(noQueuedMovies);\n}\n\nconst watchedBtnEl = document.querySelector(\"#button-watched\");\nconst queueBtnEl = document.querySelector(\"#button-queue\");\nconst watchedDivEl = document.querySelector(\"#library-watched\");\nconst queuedDivEl = document.querySelector(\"#library-queued\");\nconst libraryInfoEl = document.querySelector(\"#library-info\");\n\nwatchedBtnEl.addEventListener(\"click\", () => {\n  watchedDivEl.classList.remove(\"hidden-in-library\");\n  queuedDivEl.classList.add(\"hidden-in-library\");\n  libraryInfoEl.classList.add(\"hidden-in-library\");\n});\n\nqueueBtnEl.addEventListener(\"click\", () => {\n  watchedDivEl.classList.add(\"hidden-in-library\");\n  queuedDivEl.classList.remove(\"hidden-in-library\");\n  libraryInfoEl.classList.add(\"hidden-in-library\");\n});\n"],"names":["$9da563a3715d9237$var$watchedMovies","JSON","parse","localStorage","getItem","$9da563a3715d9237$var$queuedMovies","$9da563a3715d9237$var$watchedMoviesContainerEl","document","querySelector","$9da563a3715d9237$var$queuedMoviesContainerEl","Array","isArray","movies","forEach","movie","card","createElement","className","innerHTML","$3479m","IMG_URL","poster_path","original_title","genres","join","release_date","slice","addEventListener","$40lI0","modalBoxShow","appendChild","classList","remove","showWatchedMovies","noWatchedMovies","showQueuedMovies","noQueuedMovies","$9da563a3715d9237$var$watchedBtnEl","$9da563a3715d9237$var$queueBtnEl","$9da563a3715d9237$var$watchedDivEl","$9da563a3715d9237$var$queuedDivEl","$9da563a3715d9237$var$libraryInfoEl","add"],"version":3,"file":"library.9f7201aa.js.map"}