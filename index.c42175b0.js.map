{"mappings":"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","sources":["src/js/setup.js","src/js/modal.js","src/js/most-popular.js","src/js/loading-spinner.js"],"sourcesContent":["export const API_KEY = \"bf096adfc02b1d9503cca39671f19618\";\nexport const IMG_URL = \"https://image.tmdb.org/t/p/w500\";\nexport const URL = \"https://api.themoviedb.org/3/\";\nexport const LANGUAGE = \"en-US\";\n","export { toggleWatched, toggleQueue };\nwindow.addEventListener(\"load\", () => {\n  document\n    .querySelector(\"#modal__button-watched\")\n    .addEventListener(\"click\", toggleWatched);\n  document\n    .querySelector(\"#modal__button-queue\")\n    .addEventListener(\"click\", toggleQueue);\n});\nfunction toggleWatched() {\n  document\n    .querySelector(\"#modal__button-watched\")\n    .classList.toggle(\"button-active\");\n  if (\n    document\n      .querySelector(\"#modal__button-watched\")\n      .classList.contains(\"button-active\")\n  ) {\n    document.querySelector(\"#modal__button-watched\").textContent =\n      \"Remove from watched\";\n  } else {\n    document.querySelector(\"#modal__button-watched\").textContent =\n      \"Add to watched\";\n  }\n}\nfunction toggleQueue() {\n  document\n    .querySelector(\"#modal__button-queue\")\n    .classList.toggle(\"button-active\");\n  if (\n    document\n      .querySelector(\"#modal__button-queue\")\n      .classList.contains(\"button-active\")\n  ) {\n    document.querySelector(\"#modal__button-queue\").textContent =\n      \"Remove from queue\";\n  } else {\n    document.querySelector(\"#modal__button-queue\").textContent = \"Add to queue\";\n  }\n}\n","import { API_KEY, IMG_URL, URL, LANGUAGE } from \"./setup\";\nimport { showSpinner, hideSpinner } from \"./loading-spinner\";\n\nexport const fetchMostPopular = () => {\n  const options = {\n    method: \"GET\",\n    headers: {\n      accept: \"application/json\",\n      Authorization: `Bearer ${API_KEY}`,\n    },\n  };\n\n  const fetchPopularData = async () => {\n    try {\n      showSpinner();\n      const response = await fetch(\n        `${URL}movie/popular?language=${LANGUAGE}&page=1&api_key=${API_KEY}`,\n        options\n      );\n      const data = await response.json();\n      hideSpinner();\n      return data.results;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const fetchGenres = async () => {\n    try {\n      const response = await fetch(\n        `${URL}/genre/movie/list?api_key=${API_KEY}`,\n        options\n      );\n      const genreNames = await response.json();\n      return genreNames.genres;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const matchGenres = async () => {\n    const genres = await fetchGenres();\n    const popularMoviesData = await fetchPopularData();\n    const movies = popularMoviesData.map(movie => {\n      const movieGenresIds = movie.genre_ids;\n      const matchedGenres = [];\n      for (let i = 0; i < movieGenresIds.length; i++) {\n        for (let j = 0; j < genres.length; j++) {\n          if (movieGenresIds[i] === genres[j].id) {\n            matchedGenres.push(genres[i].name);\n          }\n        }\n      }\n      movie.genres = matchedGenres;\n      return movie;\n    });\n    popularMovies(movies);\n  };\n  matchGenres();\n\n  const popularMovies = movies => {\n    movies.forEach(movie => {\n      const card = document.createElement(\"div\");\n      card.className = \"card\";\n      card.innerHTML = `<div id=\"card\" class=\"card\" >\n                   <img  class=\"card__poster\" src=\"${IMG_URL}${\n        movie.poster_path\n      }\" alt=\"${movie.original_title}\" title=\"${movie.original_title}\" />\n                      </div>\n                       <div class=\"card__content\">\n           <div class=\"card__info\">\n               <div class=\"card__title\">${movie.original_title}</div>\n            <div class=\"card__genre\">${movie.genres.join(\", \")} |</div>\n              <div class=\"card__release\">${movie.release_date.slice(0, 4)}</div>\n            </div>\n          </div>`;\n\n      const moviesContainerEl = document.querySelector(\"#gallery\");\n\n      moviesContainerEl.appendChild(card);\n      moviesContainerEl.classList.remove(\"hidden\");\n\n      // show Modal\n\n      card.addEventListener(\"click\", () => {\n        modalBoxShow(movie);\n      });\n      const modalBoxShow = movie => {\n        const popupEl = document.querySelector(\".backdrop\");\n        const closeBtnEl = document.querySelector(\".modal__btn-close\");\n        const imageEl = document.querySelector(\".modal__photo\");\n        const titleEl = document.querySelector(\".modal__title\");\n        const voteEl = document.querySelector(\".modal__stats-vote\");\n        const votesEl = document.querySelector(\".modal__stats-votes\");\n        const popularityEl = document.querySelector(\".modal__popularity\");\n        const originalTitleEl = document.querySelector(\".modal__film-title\");\n        const genreEl = document.querySelector(\".modal__genre\");\n        const aboutEl = document.querySelector(\".modal__about-text\");\n\n        popupEl.classList.remove(\"is-hidden\");\n        moviesContainerEl.classList.add(\"hidden\");\n        imageEl.src = `${IMG_URL}${movie.poster_path}`;\n        titleEl.innerHTML = `${movie.original_title}`;\n        voteEl.innerHTML = `${movie.vote_average}`;\n        votesEl.innerHTML = `${movie.vote_count}`;\n        popularityEl.innerHTML = `${movie.popularity}`;\n        originalTitleEl.innerHTML = `${movie.original_title}`;\n        genreEl.innerHTML = `${movie.genres.join(\", \")}`;\n        aboutEl.innerHTML = `${movie.overview}`;\n\n        // hide Modal\n\n        closeBtnEl.addEventListener(\"click\", () => {\n          popupEl.classList.add(\"is-hidden\");\n          moviesContainerEl.classList.remove(\"hidden\");\n        });\n        window.addEventListener(\"keyup\", e => {\n          if (e.key === \"Escape\") {\n            popupEl.classList.add(\"is-hidden\");\n          }\n        });\n        window.addEventListener(\"keyup\", e => {\n          if (e.key === \"Escape\") {\n            popupEl.classList.add(\"is-hidden\");\n            moviesContainerEl.classList.remove(\"hidden\");\n          }\n        });\n        window.addEventListener(\"click\", e => {\n          if (e.target.classList.contains(\"backdrop\")) {\n            popupEl.classList.add(\"is-hidden\");\n            moviesContainerEl.classList.remove(\"hidden\");\n          }\n        });\n      };\n    });\n  };\n};\nfetchMostPopular();\n","export const showSpinner = () => {\n  const spinnerEl = document.querySelector(\".lds-ring\");\n  spinnerEl.style.display = \"inline-block\";\n};\n\nexport const hideSpinner = () => {\n  const spinnerEl = document.querySelector(\".lds-ring\");\n  spinnerEl.style.display = \"none\";\n};\n"],"names":["$23b74aa3aeac62a3$export$a9861bd62f48e142","$23b74aa3aeac62a3$export$1d6744690e556718","$23b74aa3aeac62a3$export$61abde59b50deb8e","$2ea800676e6f7669$export$db8da8110682733b","document","querySelector","classList","toggle","contains","textContent","$2ea800676e6f7669$export$c6104e1232c627ca","options","method","headers","accept","Authorization","fetchPopularData","async","style","display","response","fetch","data","json","results","error","console","genres","fetchGenres","movies","map","movie","movieGenresIds","genre_ids","matchedGenres","i","length","j","id","push","name","popularMovies","matchGenres","forEach","card","createElement","className","innerHTML","poster_path","original_title","join","release_date","slice","moviesContainerEl","appendChild","remove","addEventListener","modalBoxShow","popupEl","closeBtnEl","imageEl","titleEl","voteEl","votesEl","popularityEl","originalTitleEl","genreEl","aboutEl","add","src","vote_average","vote_count","popularity","overview","window","e","key","target","$1542779201f52248$export$a5868ac4057d47f8"],"version":3,"file":"index.c42175b0.js.map"}