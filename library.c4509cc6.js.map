{"mappings":"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","sources":["src/js/setup.js","src/js/modal.js","src/js/local-storage.js","src/js/library.js"],"sourcesContent":["export const API_KEY = \"bf096adfc02b1d9503cca39671f19618\";\nexport const IMG_URL = \"https://image.tmdb.org/t/p/w500\";\nexport const URL = \"https://api.themoviedb.org/3/\";\nexport const LANGUAGE = \"en-US\";\n","import { IMG_URL } from \"./setup\";\nimport { UserMovies } from \"./local-storage\";\n\nconst userMovies = new UserMovies();\n\nexport const modalBoxShow = movie => {\n  const popupEl = document.querySelector(\".backdrop\");\n  const closeBtnEl = document.querySelector(\".modal__btn-close\");\n  const imageEl = document.querySelector(\".modal__photo\");\n  const titleEl = document.querySelector(\".modal__title\");\n  const voteEl = document.querySelector(\".modal__stats-vote\");\n  const votesEl = document.querySelector(\".modal__stats-votes\");\n  const popularityEl = document.querySelector(\".modal__popularity\");\n  const originalTitleEl = document.querySelector(\".modal__film-title\");\n  const genreEl = document.querySelector(\".modal__genre\");\n  const aboutEl = document.querySelector(\".modal__about-text\");\n\n  popupEl.classList.remove(\"is-hidden\");\n  const posterSrc = movie.poster_path\n    ? `${IMG_URL}${movie.poster_path}`\n    : \"https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-1-scaled-1150x647.png\";\n  const posterAlt = movie.poster_path\n    ? movie.original_title\n    : \"Poster Not Found\";\n  imageEl.innerHTML = `<img class=\"posters__img\" src=\"${posterSrc}\" alt=\"${posterAlt}\"/>`;\n  titleEl.innerHTML = `${movie.original_title}`;\n  voteEl.innerHTML = `${movie.vote_average}`;\n  votesEl.innerHTML = `${movie.vote_count}`;\n  popularityEl.innerHTML = `${movie.popularity}`;\n  originalTitleEl.innerHTML = `${movie.original_title}`;\n  genreEl.innerHTML = `${movie.genres.join(\", \")}`;\n  aboutEl.innerHTML = `${movie.overview}`;\n\n  const addWatchBtnEl = document.querySelector(\"#modal__button-watched\");\n  const addQueueBtnEl = document.querySelector(\"#modal__button-queue\");\n\n  addWatchBtnEl.addEventListener(\"click\", () => userMovies.addToWatch(movie));\n  addQueueBtnEl.addEventListener(\"click\", () => userMovies.addToQueue(movie));\n\n  closeBtnEl.addEventListener(\"click\", () => {\n    popupEl.classList.add(\"is-hidden\");\n    const iframe = document.getElementById(\"modal__trailer-video\");\n    iframe.src = \"\";\n  });\n\n  window.addEventListener(\"keyup\", event => {\n    if (event.key === \"Escape\") {\n      popupEl.classList.add(\"is-hidden\");\n    }\n  });\n\n  window.addEventListener(\"keyup\", event => {\n    if (event.key === \"Escape\") {\n      popupEl.classList.add(\"is-hidden\");\n    }\n  });\n\n  window.addEventListener(\"click\", event => {\n    if (event.target.classList.contains(\"backdrop\")) {\n      popupEl.classList.add(\"is-hidden\");\n    }\n  });\n};\n","export class UserMovies {\n  #watched = [];\n  #queued = [];\n\n  constructor() {\n    const watched = JSON.parse(localStorage.getItem(\"watched-movies\"));\n    const queued = JSON.parse(localStorage.getItem(\"queued-movies\"));\n\n    if (watched) {\n      this.#watched = watched;\n    } else {\n      this.#watched = [];\n    }\n\n    if (queued) {\n      this.#queued = queued;\n    } else {\n      this.#queued = [];\n    }\n  }\n\n  get watched() {\n    return this.#watched;\n  }\n\n  get queued() {\n    return this.#queued;\n  }\n\n  isAdded(element, array) {\n    for (let i = 0; i < array.length; i++) {\n      if (+array[i].id === +element.id) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  addToWatch(element) {\n    if (this.isAdded(element, this.#watched)) {\n      this.#watched.push(element);\n      localStorage.setItem(\"watched-movies\", JSON.stringify(this.#watched));\n    }\n  }\n\n  addToQueue(element) {\n    if (this.isAdded(element, this.#queued)) {\n      this.#queued.push(element);\n      localStorage.setItem(\"queued-movies\", JSON.stringify(this.#queued));\n    }\n  }\n}\n","import \"../sass/main.scss\";\nimport { API_KEY, IMG_URL, URL, LANGUAGE } from \"./setup\";\nimport { UserMovies } from \"./local-storage\";\nimport { modalBoxShow } from \"./modal\";\n\nlet currentPage = 1;\nlet totalPages = 0;\n\nconst fetchPopularData = async page => {\n  try {\n    // showSpinner();\n    const response = await fetch(\n      `${URL}movie/popular?language=${LANGUAGE}&page=${page}&api_key=${API_KEY}`\n    );\n    const data = await response.json();\n    // hideSpinner();\n    return data;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst fetchGenres = async () => {\n  try {\n    const response = await fetch(`${URL}genre/movie/list?api_key=${API_KEY}`);\n    const genreNames = await response.json();\n    return genreNames.genres;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst matchGenres = async () => {\n  const genres = await fetchGenres();\n  const popularMoviesData = await fetchPopularData(currentPage);\n  const movies = popularMoviesData.results.map(movie => {\n    const movieGenresIds = movie.genre_ids;\n    const matchedGenres = [];\n    for (let i = 0; i < movieGenresIds.length; i++) {\n      for (let j = 0; j < genres.length; j++) {\n        if (movieGenresIds[i] === genres[j].id) {\n          matchedGenres.push(genres[j].name);\n        }\n      }\n    }\n    movie.genres = matchedGenres;\n    return movie;\n  });\n  return movies;\n};\n\nlet watchedMovies = JSON.parse(localStorage.getItem(\"watched-movies\"));\nlet queuedMovies = JSON.parse(localStorage.getItem(\"queued-movies\"));\n\nconst watchedMoviesContainerEl = document.querySelector(\"#library-watched\");\nconst queuedMoviesContainerEl = document.querySelector(\"#library-queued\");\n\nif (watchedMovies && Array.isArray(watchedMovies)) {\n  const showWatchedMovies = movies => {\n    movies.forEach(movie => {\n      const card = document.createElement(\"div\");\n      card.className = \"card\";\n      card.innerHTML = `\n          <div id=\"card\" class=\"card\" >\n            <img class=\"card__poster\" src=\"${IMG_URL}${movie.poster_path}\" alt=\"${movie.original_title}\" title=\"${movie.original_title}\" />\n          </div>\n          <div class=\"card__content\">\n            <div class=\"card__info\">\n              <div class=\"card__title\">${movie.original_title}</div>\n              <div class=\"card__genre\">${movie.genres.join(\", \")} |</div>\n              <div class=\"card__release\">${movie.release_date.slice(0, 4)}</div>\n            </div>\n          </div>`;\n      card.addEventListener(\"click\", () => {\n        modalBoxShow(movie);\n      });\n      watchedMoviesContainerEl.appendChild(card);\n      watchedMoviesContainerEl.classList.remove(\"hiddenColor\");\n    });\n  };\n  showWatchedMovies(watchedMovies);\n\n} else {\n  const noWatchedMovies = document.createElement(\"div\");\n  noWatchedMovies.innerHTML = `\n    <p class=\"library__title\">\n        <strong>You have no watched movies.</strong><br /><a href=\"index.html\">Select first movie</a> and click \"Add to watched\" button.\n    </p>`;\n  watchedMoviesContainerEl.appendChild(noWatchedMovies);\n}\n\nif (queuedMovies && Array.isArray(queuedMovies)) {\n  const showQueuedMovies = movies => {\n    movies.forEach(movie => {\n      const card = document.createElement(\"div\");\n      card.className = \"card\";\n      card.innerHTML = `\n          <div id=\"card\" class=\"card\" >\n            <img class=\"card__poster\" src=\"${IMG_URL}${movie.poster_path}\" alt=\"${movie.original_title}\" title=\"${movie.original_title}\" />\n          </div>\n          <div class=\"card__content\">\n            <div class=\"card__info\">\n              <div class=\"card__title\">${movie.original_title}</div>\n              <div class=\"card__genre\">${movie.genres.join(\", \")} |</div>\n              <div class=\"card__release\">${movie.release_date.slice(0, 4)}</div>\n            </div>\n          </div>`;\n      card.addEventListener(\"click\", () => {\n        modalBoxShow(movie);\n      });\n      queuedMoviesContainerEl.appendChild(card);\n      queuedMoviesContainerEl.classList.remove(\"hiddenColor\");\n    });\n  };\n  showQueuedMovies(queuedMovies);\n  \n} else {\n  const noQueuedMovies = document.createElement(\"div\");\n  noQueuedMovies.innerHTML = `\n    <p class=\"library__title\">\n        <strong>You have no queued movies.</strong><br /><a href=\"index.html\">Select first movie</a> and click \"Add to queue\" button.\n    </p>`;\n  queuedMoviesContainerEl.appendChild(noQueuedMovies);\n}\n\nconst watchedBtnEl = document.querySelector(\"#button-watched\");\nconst queueBtnEl = document.querySelector(\"#button-queue\");\nconst watchedDivEl = document.querySelector(\"#library-watched\");\nconst queuedDivEl = document.querySelector(\"#library-queued\");\nconst libraryInfoEl = document.querySelector(\"#library-info\");\n\nwatchedBtnEl.addEventListener(\"click\", () => {\n  watchedDivEl.classList.remove(\"hidden-in-library\");\n  queuedDivEl.classList.add(\"hidden-in-library\");\n  libraryInfoEl.classList.add(\"hidden-in-library\");\n});\n\nqueueBtnEl.addEventListener(\"click\", () => {\n  watchedDivEl.classList.add(\"hidden-in-library\");\n  queuedDivEl.classList.remove(\"hidden-in-library\");\n  libraryInfoEl.classList.add(\"hidden-in-library\");\n});\n"],"names":["$23b74aa3aeac62a3$export$1d6744690e556718","$2ea800676e6f7669$var$userMovies","watched","queued","constructor","JSON","parse","localStorage","getItem","this","isAdded","element","array","i","length","id","addToWatch","push","setItem","stringify","addToQueue","$2ea800676e6f7669$export$988bc7e2c1f1d15f","movie","popupEl","document","querySelector","closeBtnEl","imageEl","titleEl","voteEl","votesEl","popularityEl","originalTitleEl","genreEl","aboutEl","classList","remove","posterSrc","poster_path","posterAlt","original_title","innerHTML","vote_average","vote_count","popularity","genres","join","overview","addWatchBtnEl","addQueueBtnEl","addEventListener","add","getElementById","src","window","event","key","target","contains","$9da563a3715d9237$var$watchedMovies","$9da563a3715d9237$var$queuedMovies","$9da563a3715d9237$var$watchedMoviesContainerEl","$9da563a3715d9237$var$queuedMoviesContainerEl","Array","isArray","movies","forEach","card","createElement","className","release_date","slice","appendChild","showWatchedMovies","noWatchedMovies","showQueuedMovies","noQueuedMovies","$9da563a3715d9237$var$watchedBtnEl","$9da563a3715d9237$var$queueBtnEl","$9da563a3715d9237$var$watchedDivEl","$9da563a3715d9237$var$queuedDivEl","$9da563a3715d9237$var$libraryInfoEl"],"version":3,"file":"library.c4509cc6.js.map"}